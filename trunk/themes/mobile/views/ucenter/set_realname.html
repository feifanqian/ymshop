
<link type="text/css" rel="stylesheet" href="{url:#css/ucenter.css}" />
{echo:JS::import('form');}
{echo:JS::import('date');}
<div class="ma20 bg-white p20">
    <form  action="{url:/ucenter/info_save}" method="post">
        <dl>
            <dd class="input gray">姓名: </dd>
            <dd><input  class="input" type="text" pattern="required" name="nickname" maxlen="20" value="{$nickname}" placeholder="姓名" alt="姓名不能为空"></dd>
            <dd><input class="input" type="text" pattern="required" name="real_name" maxlen="20" value="{$real_name}"  placeholder="真实姓名"></dd>
            <dd id="areas" class="h-box" >
                <div class="flex_1">
                    <div class="select">
                        <div class="option"></div>
                        <input  id="areas_hidden" type="text" class="input" style="visibility:hidden;width:0;" value="" alt="证件类型">
                        <select id="province" name="province" >
                            <option value="1">身份证 </option>
                            <option value="2">护照 </option>
                            <option value="3">军官证 </option>
                            <option value="4">回乡证 </option>
                            <option value="5">台胞证 </option>
                            <option value="6">警官证 </option>
                            <option value="6">警官证 </option>
                            <option value="7">士兵证  </option>
                            <option value="99">其它证件 </option>
                        </select>
                    </div>
                </div>
                <div class="flex_1">
                    <div class="select">
                        <div class="option"></div>
                        <select id="city" name="city"><option value="0">市</option></select>
                    </div>
                </div>
            </dd>
            <dd>
                <div class="select">
                    <div class="option"></div>
                    <select id="county" name="county"><option value="0">县/区</option></select></div>
            </dd>
            <dd><input  class="input" type="text" pattern="required" name="nickname" maxlen="20" value="{$nickname}" placeholder="证件号码" alt="证件号码不能为空"></dd>
            <dd>
                <input class="btn" type="submit" value="保存">
            </dd>
        </dl>
    </form>
</div>
<script type="text/javascript">
    $(function(){
        var selected = [{$province|0},{$city|0},{$county|0}];
        $("#areas").Linkage({ url:"{url:/ajax/area_data}",selected:selected,initRunCallBack:true,callback:function(data){
            var text = new Array();
            var value = new Array();
            for (i in data[0]){
                if (data[0][i] != 0){
                    text.push(data[1][i]);
                    value.push(data[0][i]);
                }
            }

            $("#province").parent().find(".option").text(data[1][0]);
            $("#city").parent().find(".option").text(data[1][1]);
            $("#county").parent().find(".option").text(data[1][2]);
            $("#areas_hidden").val(value.join(','));
            FireEvent(document.getElementById("areas_hidden"), "change");
        }});
        {if:isset($invalid)}
        autoValidate.showMsg({id:$("input[name='{$invalid['name']}']").get(0), error:true, msg:'{$invalid['msg']}'});
        {/if}
        });
</script> 