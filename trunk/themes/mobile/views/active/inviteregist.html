<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=640, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.bootcss.com/normalize/8.0.0/normalize.min.css">
    <link rel="stylesheet" href="http://www.ymlypt.com/static/yuanmeng1/activity_a/css/inviteregist.css">
    <title>邀请列表</title>
</head>
<body>
<div id="app">
    <div class="search">
        <input type="text" id="keyword" name="" title="" required>
        <a href="" class="go"><img src="http://www.ymlypt.com/static/yuanmeng/activity_a/img/inviteregist/p1.png" alt=""></a>
    </div>
    <div class="list">
        <p class="title">邀请名单</p>
        <div class="list-content">
        {if:$list!=null}
            {foreach:items=$list key=$k item=$item}
            <div class="cell">
                <img src='{echo:Url::urlFormat("@".$item['avatar'])}' alt="" class="avatar">
                <span class="nickname">{$item['real_name']|$item['nickname']}</span>
                <span class="time">{$item['create_time']}</span>
                <span class="status">注册成功</span>
            </div>
            {/foreach}
            <!--加载更多-->
            <div class="more">加载更多</div>
        {else:}
            <div class="none">暂无</div>    
        {/if}    
        </div>
    </div>
    <div class="invite">
        <!-- <a href="javascript:;" id="shareWechat" onclick="call('wechatFriend')"><img src="http://www.ymlypt.com/static/yuanmeng/activity_a/img/recruit/p5.png" alt=""></a> -->
        <a href="javascript:;" id="shareWechat"><img src="http://www.ymlypt.com/static/yuanmeng/activity_a/img/recruit/p5.png" alt=""></a>
    </div>
</div>
</body>
<script src="http://www.ymlypt.com/static/yuanmeng/activity_a/js/main.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script>
    $(function ($) {
        //  搜索
        $('.search > .go').click(e => {
            let keyword = $('#keyword').val();
            if (keyword === '' || keyword.length === 0) {
                alert('请输入搜索内容');
                return;
            }
            alert(`搜索:${keyword}`);
        });

        // 加载更多
        $('.list > .more').click(e => {
            alert('加载更多');
        })
    })
</script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript" src="https://hm.baidu.com/hm.js?d69321757dcfbfbe09dbddd4dca87b28"></script>
<script type="text/javascript">
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?d69321757dcfbfbe09dbddd4dca87b28";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
</script>
<script type="text/javascript" src="https://fa-ge.github.io/NativeShare/NativeShare.js"></script> 
<script>
 wx.config({
   debug:  false,  //调式模式，设置为ture后会直接在网页上弹出调试信息，用于排查问题
   appId: '{$signPackage["appId"]}',
   timestamp: '{$signPackage["timestamp"]}',
   nonceStr: '{$signPackage["nonceStr"]}',
   signature: '{$signPackage["signature"]}',
   jsApiList: [  //需要使用的网页服务接口
       'checkJsApi',  //判断当前客户端版本是否支持指定JS接口
       'onMenuShareTimeline', //分享给好友
       'onMenuShareAppMessage', //分享到朋友圈
       'onMenuShareQQ',  //分享到QQ
       'onMenuShareWeibo' //分享到微博
   ]
 });
 wx.checkJsApi({
    jsApiList: [
        'getLocation',
        'onMenuShareTimeline',
        'onMenuShareAppMessage'
    ],
    success: function (res) {
      alert(JSON.stringify(res));
    }
});
 $('#shareWechat').on("click",function(){
    // alert('share');
    // wx.ready(function () {   //ready函数用于调用API，如果你的网页在加载后就需要自定义分享和回调功能，需要在此调用分享函数。//如果是微信游戏结束后，需要点击按钮触发得到分值后分享，这里就不需要调用API了，可以在按钮上绑定事件直接调用。因此，微信游戏由于大多需要用户先触发获取分值，此处请不要填写如下所示的分享API
        wx.onMenuShareTimeline({  //例如分享到朋友圈的API  
           title: '测试', // 分享标题
           link: 'http://www.ymlypt.com/active/recruit', // 分享链接
           imgUrl: '', // 分享图标
           success: function () {
               // 用户确认分享后执行的回调函数
           },
           cancel: function () {
               // 用户取消分享后执行的回调函数
           }
        });
    // });
 });
  
wx.error(function (res) {
 alert(res.errMsg);  //打印错误消息。及把 debug:false,设置为debug:ture就可以直接在网页上看到弹出的错误提示
});

        // var nativeShare = new NativeShare();
        // var user_id = {$user_id};
        // var shareData = {
        //     title: '圆梦共享网',
        //     desc: 'NativeShare是一个整合了各大移动端浏览器调用原生分享的插件',
        //     // 如果是微信该link的域名必须要在微信后台配置的安全域名之内的。
        //     link: 'http://www.ymlypt.com/active/login/redirect/recruit/inviter/'+user_id,
        //     icon: 'http://www.ymlypt.com/static/yuanmeng1/activity_a/img/recruit/header.jpg',
        //     // 不要过于依赖以下两个回调，很多浏览器是不支持的
        //     success: function() {
        //         alert('success')
        //     },
        //     fail: function() {
        //         alert('fail')
        //     }
        // }
        // nativeShare.setShareData(shareData)

        // function call(command) {
        //     try {
        //         nativeShare.call(command)
        //     } catch (err) {
        //         // 如果不支持，你可以在这里做降级处理
        //         alert(err.message)
        //     }
        // }

        // function setTitle(title) {
        //     nativeShare.setShareData({
        //         title: title,
        //     })
        // }
</script>
</html>